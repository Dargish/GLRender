<?xml version='1.0' encoding='us-ascii'?>
<shader version="400">
  <struct name="GBufferData">
    <value name="Color" type="vec3"/>
    <value name="Normal" type="vec3"/>
    <value name="Roughness" type="float"/>
    <value name="Metallicity" type="float"/>
    <value name="Depth" type="float"/>
  </struct>
  <function name="ReadGBuffer" return="GBufferData">
    <uniform type="sampler2D">g_A</uniform>
    <uniform type="sampler2D">g_B</uniform>
    <uniform type="sampler2D">g_C</uniform>
    <input type="vec2">uv</input>
    <source>
      GBufferData data;
      vec4 A = texture(g_A, uv);
      vec4 B = texture(g_B, uv);
      vec4 C = texture(g_C, uv);
      data.Color = A.rgb;
      data.Roughness = A.a;
      data.Normal = normalize(B.rgb);
      data.Metallicity = B.a;
      data.Depth = C.r;
      return data;
    </source>
  </function>
  <function name="saturate" return="float">
    <input type="float">v</input>
    <source>
      return clamp(v, 0.0, 1.0);
    </source>
  </function>
  <function name="saturate" return="vec3">
    <input type="vec3">v</input>
    <source>
      return clamp(v, vec3(0.0), vec3(1.0));
    </source>
  </function>
</shader>
